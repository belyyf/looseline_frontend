<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOOSELINE - –ö–æ—à–µ–ª—ë–∫</title>
    <link rel="icon" href="/shared/images/logo_32x32.png">
    <base href="/wallet/">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Shared Header styles -->
    <link rel="stylesheet" href="/shared/components/header/header.css">
    <link rel="stylesheet" href="styles.css?v=3">
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
    <!-- Unified Header Component -->
    <div id="ll-header"></div>

    <!-- Main Content - Single Page -->
    <main class="main">
        <div class="container">

            <!-- Section: Overview -->
            <section class="section" id="overview">
                <div class="section-header">
                    <h2 class="section-title">–û–±–∑–æ—Ä</h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–æ</div>
                        <div class="stat-value" id="totalDeposited">$10,000.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–í—Å–µ–≥–æ –≤—ã–≤–µ–¥–µ–Ω–æ</div>
                        <div class="stat-value" id="totalWithdrawn">$5,000.00</div>
                    </div>
                    <div class="stat-card highlight">
                        <div class="stat-label">–ü—Ä–∏–±—ã–ª—å</div>
                        <div class="stat-value positive" id="netProfit">+$2,180.00</div>
                        <div class="stat-change" id="profitPercent">+87.2%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Win Rate</div>
                        <div class="stat-value" id="winRate">64%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="winRateBar" style="width: 64%"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ROI</div>
                        <div class="stat-value" id="roi">87.2%</div>
                        <div class="progress-bar">
                            <div class="progress-fill roi" id="roiBar" style="width: 87%"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–í—Å–µ–≥–æ —Å—Ç–∞–≤–æ–∫</div>
                        <div class="stat-value" id="totalBets">25</div>
                    </div>
                </div>
            </section>

            <!-- Section: Statistics Chart -->
            <section class="section" id="stats">
                <div class="section-header">
                    <h2 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞</h2>
                    <div class="section-actions">
                        <button class="btn-text active" onclick="setChartPeriod(7, this)">7 –¥–Ω–µ–π</button>
                        <button class="btn-text" onclick="setChartPeriod(30, this)">30 –¥–Ω–µ–π</button>
                        <button class="btn-text" onclick="setChartPeriod(90, this)">3 –º–µ—Å—è—Ü–∞</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="balanceChart"></canvas>
                </div>
            </section>

            <!-- Section: History -->
            <section class="section" id="history">
                <div class="section-header">
                    <h2 class="section-title">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                    <div class="section-actions">
                        <select class="filter-select" id="historyFilter" onchange="filterHistory()">
                            <option value="all">–í—Å–µ</option>
                            <option value="deposit">–î–µ–ø–æ–∑–∏—Ç—ã</option>
                            <option value="withdrawal">–í—ã–≤–æ–¥—ã</option>
                            <option value="bet">–°—Ç–∞–≤–∫–∏</option>
                            <option value="win">–í—ã–∏–≥—Ä—ã—à–∏</option>
                        </select>
                        <button class="btn-outline" onclick="openModal('exportModal')">
                            –≠–∫—Å–ø–æ—Ä—Ç
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th onclick="sortHistory('date')">–î–∞—Ç–∞</th>
                                <th>–¢–∏–ø</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th onclick="sortHistory('amount')">–°—É–º–º–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button class="pagination-btn" onclick="changePage(-1)">–ù–∞–∑–∞–¥</button>
                    <span class="pagination-info" id="paginationInfo">1 / 1</span>
                    <button class="pagination-btn" onclick="changePage(1)">–í–ø–µ—Ä–µ–¥</button>
                </div>
            </section>

            <!-- Section: Payment Methods -->
            <section class="section" id="payment-methods">
                <div class="section-header">
                    <h2 class="section-title">–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</h2>
                    <button class="btn-outline" onclick="addPaymentMethod()">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É</button>
                </div>
                <div class="cards-grid" id="paymentMethodsList">
                </div>
            </section>

        </div>
    </main>

    <!-- Modal: Deposit -->
    <div class="modal" id="depositModal">
        <div class="modal-overlay" onclick="closeModal('depositModal')"></div>
        <div class="modal-content deposit-modal">
            <div class="modal-header">
                <div class="modal-header-content">
                    <div class="modal-icon">üí≥</div>
                    <div>
                        <h2 class="modal-title">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h2>
                        <p class="modal-subtitle">–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Stripe</p>
                    </div>
                </div>
                <button class="modal-close" onclick="closeModal('depositModal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Current Balance Info -->
                <div class="deposit-balance-info">
                    <div class="deposit-balance-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                    <div class="deposit-balance-amount" id="depositCurrentBalance">$5,000.00</div>
                </div>

                <!-- Amount Section -->
                <div class="form-group deposit-amount-section">
                    <label class="form-label">
                        <span>–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                        <span class="form-label-hint">–ú–∏–Ω. $1.00 ‚Ä¢ –ú–∞–∫—Å. $100,000.00</span>
                    </label>
                    <div class="quick-amounts">
                        <button class="quick-amount" onclick="setDepositAmount(100)">
                            <span class="quick-amount-value">$100</span>
                        </button>
                        <button class="quick-amount" onclick="setDepositAmount(250)">
                            <span class="quick-amount-value">$250</span>
                        </button>
                        <button class="quick-amount" onclick="setDepositAmount(500)">
                            <span class="quick-amount-value">$500</span>
                        </button>
                        <button class="quick-amount" onclick="setDepositAmount(1000)">
                            <span class="quick-amount-value">$1,000</span>
                        </button>
                    </div>
                    <div class="input-with-currency deposit-amount-input">
                        <span class="currency-symbol">$</span>
                        <input type="number" class="form-input" id="depositAmount" placeholder="0.00" min="1"
                            max="100000" step="0.01">
                    </div>
                    <div class="deposit-preview">
                        <div class="deposit-preview-item">
                            <span class="deposit-preview-label">–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                            <span class="deposit-preview-value" id="depositPreviewAmount">$0.00</span>
                        </div>
                        <div class="deposit-preview-item">
                            <span class="deposit-preview-label">–ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                            <span class="deposit-preview-value deposit-preview-total"
                                id="depositPreviewTotal">$5,000.00</span>
                        </div>
                    </div>
                </div>

                <!-- Payment Method Section -->
                <div class="form-group">
                    <label class="form-label">
                        <span>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</span>
                    </label>
                    <div class="payment-methods-list" id="depositPaymentMethods">
                    </div>
                </div>

                <!-- Stripe Card Form -->
                <div id="stripeCardContainer" class="form-group stripe-form-container">
                    <label class="form-label">
                        <span>–î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</span>
                        <span class="form-label-hint">–ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Stripe</span>
                    </label>
                    <div class="stripe-card-element" id="card-element"></div>
                    <div class="stripe-error" id="card-errors"></div>
                    <button type="button" class="btn-outline" id="addCardBtn" onclick="addCardOnly()"
                        style="margin-top: 12px; width: 100%; display: none;">
                        <span>üí≥ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É</span>
                    </button>
                </div>

                <!-- Save Card Option -->
                <div class="form-checkbox deposit-save-card">
                    <input type="checkbox" id="saveCard" checked>
                    <label for="saveCard">
                        <span class="checkbox-label-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ä—Ç—É –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π</span>
                        <span class="checkbox-label-hint">–£—Å–∫–æ—Ä–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                    </label>
                </div>

                <!-- Security Info -->
                <div class="deposit-security-info">
                    <div class="security-icon">üîí</div>
                    <div class="security-text">
                        <strong>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</strong>
                        <span>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º SSL –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Stripe</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('depositModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary btn-deposit" id="depositBtn" onclick="processDeposit()">
                    <span class="btn-icon">‚úì</span>
                    <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Withdraw -->
    <div class="modal" id="withdrawModal">
        <div class="modal-overlay" onclick="closeModal('withdrawModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞</h2>
                <button class="modal-close" onclick="closeModal('withdrawModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="available-balance-box">
                    <span>–î–æ—Å—Ç—É–ø–Ω–æ:</span>
                    <span class="available-amount" id="withdrawAvailable">$4,750.00</span>
                </div>
                <div class="form-group">
                    <label class="form-label">–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞</label>
                    <div class="input-with-currency">
                        <span class="currency-symbol">$</span>
                        <input type="number" class="form-input" id="withdrawAmount" placeholder="0.00" min="10">
                    </div>
                    <div class="form-hints">
                        <span>–ú–∏–Ω–∏–º—É–º: $10 | –ú–∞–∫—Å–∏–º—É–º: $50,000/–¥–µ–Ω—å</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">–°–ø–æ—Å–æ–± –≤—ã–≤–æ–¥–∞</label>
                    <div class="withdrawal-methods-list" id="withdrawalMethods">
                    </div>
                </div>
                <div class="info-box">
                    <p>–°—Ä–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏: 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</p>
                    <p>–ö–æ–º–∏—Å—Å–∏—è: 0%</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('withdrawModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="processWithdraw()">–í—ã–≤–µ—Å—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- Modal: Export -->
    <div class="modal" id="exportModal">
        <div class="modal-overlay" onclick="closeModal('exportModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞</h2>
                <button class="modal-close" onclick="closeModal('exportModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
                    <div class="date-range">
                        <input type="date" class="form-input" id="exportDateFrom">
                        <span>‚Äî</span>
                        <input type="date" class="form-input" id="exportDateTo">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">–§–æ—Ä–º–∞—Ç</label>
                    <div class="format-options">
                        <label class="format-option selected">
                            <input type="radio" name="format" value="csv" checked>
                            <span>CSV</span>
                        </label>
                        <label class="format-option">
                            <input type="radio" name="format" value="pdf">
                            <span>PDF</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('exportModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-primary" onclick="exportReport()">–°–∫–∞—á–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Modal: Success -->
    <div class="modal" id="successModal">
        <div class="modal-overlay" onclick="closeModal('successModal')"></div>
        <div class="modal-content modal-sm">
            <div class="success-content">
                <div class="success-icon">‚úì</div>
                <h3 id="successTitle">–£—Å–ø–µ—à–Ω–æ</h3>
                <p id="successMessage"></p>
                <button class="btn-primary" onclick="closeModal('successModal')">OK</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Shared Header Component -->
    <script src="/shared/components/header/header.js?v=16"></script>
    <script src="app.js?v=3"></script>
</body>

</html>