---
order: 1
title: Интерфейс
---

---

## 🏗️ СТРУКТУРА FRONTEND ПАПОК

```
frontend/src/
├── pages/
│   ├── BetsPage.tsx                 ⭐ Главная страница размещения ставок
│   ├── BetSlipPage.tsx              ⭐ Купон/Слип для оформления ставки
│   ├── BetHistoryPage.tsx           ⭐ История ставок пользователя
│   └── MyWalletPage.tsx             ⭐ Кошелёк и баланс
│
├── components/
│   ├── BetPlacement/
│   │   ├── BetSlip.tsx              🎟️ Купон с выбранными событиями
│   │   ├── BetForm.tsx              📝 Форма размещения ставки
│   │   ├── BetAmountInput.tsx       💵 Ввод суммы ставки
│   │   ├── BetTypeSelector.tsx      🎯 Выбор типа ставки (П1, X, П2)
│   │   ├── PotentialWinDisplay.tsx  📈 Расчёт выигрыша в реальном времени
│   │   └── BetSubmitButton.tsx      ✅ Кнопка подтверждения
│   │
│   ├── BetConfirmation/
│   │   ├── BetConfirmationModal.tsx 📋 Подтверждение перед ставкой
│   │   ├── BetDetails.tsx           📊 Детали ставки
│   │   └── BetSummary.tsx           📌 Краткое резюме
│   │
│   ├── Coupons/
│   │   ├── CouponSelector.tsx       🎪 Выбор ставок для купона
│   │   ├── CouponSummary.tsx        📊 Резюме купона
│   │   ├── ExpressCalculator.tsx    🧮 Калькулятор экспресса
│   │   └── CouponPreview.tsx        👀 Предпросмотр купона
│   │
│   ├── BetResults/
│   │   ├── BetResultCard.tsx        🏆 Карточка результата ставки
│   │   ├── WinBadge.tsx             ✅ Бейдж "Выигрыш"
│   │   ├── LossBadge.tsx            ❌ Бейдж "Проигрыш"
│   │   ├── PendingBadge.tsx         ⏳ Бейдж "В ожидании"
│   │   └── BetResultsTimeline.tsx   📅 Временная шкала результатов
│   │
│   ├── BetHistory/
│   │   ├── BetHistoryList.tsx       📋 Список всех ставок
│   │   ├── BetHistoryFilter.tsx     🔍 Фильтр истории
│   │   ├── BetHistorySearch.tsx     🔎 Поиск по номеру ставки
│   │   └── BetHistoryStats.tsx      📊 Статистика (выиграл/проиграл)
│   │
│   ├── Wallet/
│   │   ├── BalanceDisplay.tsx       💰 Отображение баланса
│   │   ├── DepositButton.tsx        💳 Кнопка пополнения
│   │   ├── WithdrawButton.tsx       🏦 Кнопка вывода
│   │   ├── TransactionHistory.tsx   📝 История транзакций
│   │   └── BalanceChart.tsx         📈 График баланса
│   │
│   ├── Notifications/
│   │   ├── BetPlacedNotif.tsx       ✅ Уведомление "Ставка принята"
│   │   ├── BetWonNotif.tsx          🎉 Уведомление "Вы выиграли"
│   │   ├── BetLostNotif.tsx         😞 Уведомление "Вы проиграли"
│   │   └── EventResolvedNotif.tsx   📢 Уведомление "Событие разрешено"
│   │
│   ├── UI/
│   │   ├── MoneyInput.tsx           💵 Специальный инпут для денег
│   │   ├── CoefficientBadge.tsx     🎯 Бейдж коэффициента
│   │   ├── Riskometer.tsx           ⚠️ Индикатор риска
│   │   ├── ConfirmDialog.tsx        ⚠️ Диалог подтверждения
│   │   └── SuccessModal.tsx         ✅ Модаль успеха
│   │
│   └── Layout/
│       ├── BetHeader.tsx            📌 Шапка с баланс
│       ├── BetSidebar.tsx           📍 Боковая панель с купоном
│       └── BetContainer.tsx         📦 Контейнер контента
│
├── services/
│   ├── betService.ts                🔌 API клиент для ставок
│   ├── walletService.ts             💰 API клиент для кошелька
│   └── notificationService.ts       📢 Сервис уведомлений
│
├── types/
│   └── bets.ts                      📋 TypeScript интерфейсы
│
├── hooks/
│   ├── useBetSlip.ts                🪝 Хук управления купоном
│   ├── useBalance.ts                🪝 Хук управления балансом
│   ├── useBetPlacement.ts           🪝 Хук размещения ставки
│   └── useBetHistory.ts             🪝 Хук истории ставок
│
├── context/
│   ├── BetSlipContext.tsx           🔄 Контекст купона
│   └── WalletContext.tsx            💰 Контекст кошелька
│
├── styles/
│   ├── bets.module.css              🎨 Стили ставок
│   ├── wallet.module.css            🎨 Стили кошелька
│   ├── history.module.css           🎨 Стили истории
│   └── global.css                   🎨 Глобальные стили
│
└── utils/
    ├── formatters.ts                🔧 Форматирование денег, дат
    ├── validators.ts                ✅ Валидация сумм
    ├── calculations.ts              🧮 Расчёты коэффициентов
    └── constants.ts                 📌 Константы (минимум, максимум)
```

---

## 💰 ЭТАП 1: СТРАНИЦА РАЗМЕЩЕНИЯ СТАВОК (BetsPage)

### ЧТО ЭТО?

Главная страница где пользователь выбирает события, вводит сумму и подтверждает ставку.

### СТРУКТУРА СТРАНИЦЫ:

```
┌────────────────────────────────────────────────────────────────┐
│ LOOSELINE | События | Ставки | История | Кошелёк | Профиль    │
├────────────────────────────────────────────────────────────────┤
│                                                                │
│  ┌─────────────────────────────────────┐  ┌──────────────────┐│
│  │ ВЫБРАННЫЕ СОБЫТИЯ:                  │  │ МОЙ КУПОН (СЛИП) ││
│  ├─────────────────────────────────────┤  ├──────────────────┤│
│  │                                     │  │                  ││
│  │ 1. Man Utd vs Liverpool             │  │ Событие 1:       ││
│  │    15.12 18:00 | Premier League     │  │ Man Utd - Liv    ││
│  │    [П1: 1.85] [X: 3.40] [П2: 4.10] │  │ П1 @ 1.85        ││
│  │                                     │  │                  ││
│  │ 2. Real vs Barcelona                │  │ Событие 2:       ││
│  │    15.12 19:45 | La Liga            │  │ Real - Barca     ││
│  │    [П1: 2.10] [X: 3.50] [П2: 3.20] │  │ П1 @ 2.10        ││
│  │                                     │  │                  ││
│  │ 3. Arsenal vs Chelsea               │  │ ────────────────││
│  │    16.12 16:00 | Premier League     │  │ Тип: ОДИНОЧНАЯ  ││
│  │    [П1: 1.95] [X: 3.30] [П2: 4.00] │  │ Коэф: 1.85 x    ││
│  │                                     │  │ Сумма: [100.00] ││
│  │ (Нажмите на коэффициент для выбора)│  │ USD              ││
│  │                                     │  │                  ││
│  │ [Добавить ещё событие →]            │  │ ПОТЕНЦИАЛ:      ││
│  │                                     │  │ 185.00 USD      ││
│  │                                     │  │ (прибыль: 85.00)││
│  │                                     │  │                  ││
│  │                                     │  │ Баланс: 5000.00 ││
│  │                                     │  │                  ││
│  │                                     │  │ [✅ ПОДТВЕРДИТЬ]││
│  │                                     │  │ [🗑️ ОЧИСТИТЬ]   ││
│  │                                     │  │                  ││
│  └─────────────────────────────────────┘  └──────────────────┘│
│                                                                │
└────────────────────────────────────────────────────────────────┘
```

### ЧТО ПРОИСХОДИТ ВНУТРИ?

```
1. Пользователь открывает /bets
   ↓
2. Видит список событий от Петра (уже загруженные из eventService)
   ↓
3. Кликает на коэффициент (например П1: 1.85 для Man Utd)
   ↓
4. BetSlipContext обновляется:
   - Добавляет это событие в купон
   - Запоминает выбранный коэффициент
   ↓
5. PotentialWinDisplay показывает расчёт в реальном времени:
   - Коэффициент: 1.85
   - Сумма: (пока не заполнена)
   - Выигрыш: 0 (жди ввода суммы)
   ↓
6. Пользователь вводит сумму (100 USD)
   ↓
7. BetAmountInput вызывает calculatePotentialWin():
   betService.calculatePotentialWin(100, 1.85)
   ↓
8. Backend рассчитывает: 100 * 1.85 = 185
   ↓
9. PotentialWinDisplay обновляется:
   - Выигрыш: 185 USD
   - Прибыль: 85 USD
   ↓
10. Пользователь видит в реальном времени сколько он может выиграть
    ↓
11. Кликает [✅ ПОДТВЕРДИТЬ]
    ↓
12. BetConfirmationModal показывает финальную проверку
```

---

## 🎟️ ЭТАП 2: КОМПОНЕНТ КУПОНА (BetSlip.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
┌──────────────────────────────┐
│ 🎟️ МОЙ КУПОН (СЛИП)          │
├──────────────────────────────┤
│                              │
│ Событие 1:                   │
│ ┌────────────────────────┐   │
│ │ Man Utd vs Liverpool   │   │
│ │ 15.12 18:00            │   │
│ │ Выбрали: П1 (1.85) ✅  │   │
│ │                        │   │
│ │ [Изменить] [Удалить]   │   │
│ └────────────────────────┘   │
│                              │
│ Событие 2:                   │
│ ┌────────────────────────┐   │
│ │ Real vs Barcelona      │   │
│ │ 15.12 19:45            │   │
│ │ Выбрали: П1 (2.10) ✅  │   │
│ │                        │   │
│ │ [Изменить] [Удалить]   │   │
│ └────────────────────────┘   │
│                              │
│ ────────────────────────────│
│ ОБЩАЯ ИНФОРМАЦИЯ:            │
│                              │
│ Тип ставки:                  │
│ ◉ ОДИНОЧНАЯ (одно событие)  │
│ ○ ЭКСПРЕСС (все события)     │
│ ○ СИСТЕМА (разные комбо)     │
│                              │
│ Сумма ставки:                │
│ [100.00] USD                 │
│ Минимум: 1.00               │
│ Максимум: 100000.00         │
│                              │
│ ──────────────────────────── │
│ РАСЧЁТ:                      │
│                              │
│ Коэффициент(ы): 1.85 x 2.10│
│ Общий коэф: 3.885           │
│ Сумма: 100.00 USD          │
│ Выигрыш: 388.50 USD        │
│ Прибыль: 288.50 USD        │
│                              │
│ Баланс: 5000.00 USD         │
│ После ставки: 4900.00 USD   │
│                              │
│ ────────────────────────────│
│                              │
│ [✅ ПОДТВЕРДИТЬ СТАВКУ]     │
│ [🗑️ ОЧИСТИТЬ КУПОН]        │
│                              │
│ ⚠️ Все события должны        │
│    выиграть для экспресса!   │
│                              │
└──────────────────────────────┘
```

### КОМПОНЕНТЫ ВНУТРИ BetSlip:

**BetSlipEvent.tsx** -- одно событие в купоне:

```
┌────────────────────────────────┐
│ Man Utd vs Liverpool           │
│ 15.12 18:00 | Premier League   │
│                                │
│ Выбран коэффициент:            │
│ [П1: 1.85 ✅] [X: 3.40] [П2]  │
│                                │
│ [Изменить выбор] [Удалить]    │
└────────────────────────────────┘
```

**PotentialWinDisplay.tsx** -- расчёт выигрыша:

```
┌────────────────────────────────┐
│ 📊 РАСЧЁТ ПОТЕНЦИАЛЬНОГО ДОХОДА│
├────────────────────────────────┤
│ Ваша ставка:    100.00 USD     │
│ Коэффициент:    1.85x          │
│ Выигрыш:        185.00 USD     │
│ Чистая прибыль: 85.00 USD      │
│                                │
│ ROI: +85% (Возврат Инвестиций)│
│                                │
│ 📈 Если выиграете все события: │
│    185.00 USD на вашем счёте   │
│                                │
│ 📉 Если проиграете хотя бы:    │
│    0 USD (потеряете 100.00)   │
└────────────────────────────────┘
```

### ЧТО ПРОИСХОДИТ?

```
1. Пользователь выбирает событие + коэффициент
   ↓
2. Это добавляется в BetSlipContext
   ↓
3. BetSlip.tsx получает данные из контекста
   ↓
4. Для каждого события рендерит BetSlipEvent
   ↓
5. При изменении суммы → calculatePotentialWin()
   ↓
6. PotentialWinDisplay обновляется в реальном времени
   ↓
7. Пользователь видит сколько может выиграть ДО подтверждения
```

---

## 📝 ЭТАП 3: ФОРМА РАЗМЕЩЕНИЯ СТАВКИ (BetForm.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
┌──────────────────────────────────────┐
│ 💵 РАЗМЕЩЕНИЕ СТАВКИ                │
├──────────────────────────────────────┤
│                                      │
│ ВЫБРАННЫЕ СОБЫТИЯ:                   │
│ ✅ Man Utd vs Liverpool (П1 @ 1.85) │
│                                      │
│ ──────────────────────────────────── │
│                                      │
│ ВВЕДИТЕ СУММУ СТАВКИ:               │
│                                      │
│ [💵 100.00] USD                     │
│  ↑                                   │
│ Быстрые суммы:                      │
│ [10] [25] [50] [100] [250] [500]   │
│                                      │
│ Минимум: 1.00 USD                   │
│ Максимум: 100000.00 USD             │
│                                      │
│ Ваш баланс: 5000.00 USD             │
│                                      │
│ ──────────────────────────────────── │
│                                      │
│ РИСК:                                │
│ ████████████░░░░░░░░░░░░░░ 40% 📊   │
│ (Высокий риск при экспрессе)        │
│                                      │
│ ──────────────────────────────────── │
│                                      │
│ ДЕТАЛИ:                              │
│ Сумма ставки:     100.00 USD        │
│ Коэффициент:      1.85              │
│ Выигрыш:          185.00 USD        │
│ Прибыль:          85.00 USD         │
│                                      │
│ После ставки баланс: 4900.00 USD    │
│                                      │
│ ──────────────────────────────────── │
│                                      │
│ ☑️ Я согласен с условиями           │
│                                      │
│ [✅ ПОДТВЕРДИТЬ И СТАВИТЬ]          │
│ [🔄 НАЗАД К СОБЫТИЯМ]              │
│                                      │
└──────────────────────────────────────┘
```

### КОМПОНЕНТЫ ФОРМЫ:

**BetAmountInput.tsx** -- ввод суммы:

```
Поле ввода денег с:
- Валидацией в реальном времени
- Быстрыми кнопками сумм
- Проверкой баланса
- Информацией мин/макс
```

**RiskIndicator.tsx** -- индикатор риска:

```
Низкий риск:  ██░░░░░░░░░░░░░░░░░░░░░░░░ 10% (одиночная ставка)
Средний риск: ████████░░░░░░░░░░░░░░░░░░ 40% (экспресс из 2)
Высокий риск: ███████████████░░░░░░░░░░░░ 60% (экспресс из 3+)
```

---

## ✅ ЭТАП 4: ПОДТВЕРЖДЕНИЕ СТАВКИ (BetConfirmationModal.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
╔════════════════════════════════════════════════════════════╗
║             ⚠️ ПОДТВЕРЖДЕНИЕ СТАВКИ                       ║
╠════════════════════════════════════════════════════════════╣
║                                                            ║
║ ВНИМАНИЕ! Проверьте детали перед подтверждением:         ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ СОБЫТИЕ:                                                  ║
║ Man Utd vs Liverpool                                      ║
║ Дата: 15 Декабря 2025, 18:00                             ║
║ Лига: Premier League                                      ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ ВАША СТАВКА:                                              ║
║ На исход: П1 (Победа Man Utd)                            ║
║ Коэффициент: 1.85                                         ║
║ Сумма: 100.00 USD                                         ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ РАСЧЁТ:                                                   ║
║ ✓ Если выиграете: получите 185.00 USD                    ║
║ ✗ Если проиграете: потеряете 100.00 USD                  ║
║                                                            ║
║ Прибыль в случае выигрыша: 85.00 USD                     ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ БАЛАНС:                                                   ║
║ Текущий:     5000.00 USD                                  ║
║ После ставки: 4900.00 USD                                 ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ ☐ Я подтверждаю что это мой выбор                       ║
║                                                            ║
║ [🟢 ПОДТВЕРДИТЬ И СТАВИТЬ]  [❌ ОТМЕНА]                  ║
║                                                            ║
║ После нажатия ставка размещается и деньги вычитаются     ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

### ЧТО ПРОИСХОДИТ?

```
1. Пользователь нажимает [✅ ПОДТВЕРДИТЬ СТАВКУ]
   ↓
2. BetConfirmationModal открывается
   ↓
3. Показывает все детали ставки:
   - Выбранное событие
   - Выбранный исход
   - Коэффициент
   - Сумму ставки
   - Потенциальный выигрыш
   - Изменение баланса
   ↓
4. Пользователь проверяет и кликает "ПОДТВЕРДИТЬ И СТАВИТЬ"
   ↓
5. Frontend вызывает:
   betService.placeBet({
     event_id: 1,
     odds_id: 1,
     bet_amount: 100.00
   })
   ↓
6. Backend обрабатывает:
   POST /api/bets/place
   ↓
7. Проверяет баланс, создаёт ставку, вычитает деньги
   ↓
8. Возвращает:
   {
     "success": true,
     "bet_id": 1,
     "potential_win": 185.00
   }
   ↓
9. Frontend показывает SuccessModal:
```

---

## 🎉 ЭТАП 5: УСПЕШНАЯ СТАВКА (SuccessModal.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
╔════════════════════════════════════════════════════════════╗
║             ✅ СТАВКА ПРИНЯТА!                            ║
╠════════════════════════════════════════════════════════════╣
║                                                            ║
║                    🎉 Поздравляем!                        ║
║                                                            ║
║  Ваша ставка успешно размещена!                          ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ НОМЕР СТАВКИ: #BET-001-2025-1215                         ║
║                                                            ║
║ Событие:      Man Utd vs Liverpool                        ║
║ Исход:        П1 (Победа дома)                           ║
║ Коэффициент:  1.85                                        ║
║ Сумма:        100.00 USD                                  ║
║                                                            ║
║ Потенциальный выигрыш: 185.00 USD                        ║
║ Ваша прибыль: 85.00 USD                                   ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ БАЛАНС:                                                   ║
║ Было: 5000.00 USD                                         ║
║ Теперь: 4900.00 USD                                       ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ КОНТРОЛЬ:                                                 ║
║ ✓ Ставка принята                                         ║
║ ✓ Деньги вычтены                                         ║
║ ✓ Результаты будут доступны после завершения события     ║
║                                                            ║
║ ────────────────────────────────────────────────────────  ║
║                                                            ║
║ [📋 СКАЧАТЬ КВИТАНЦИЮ]  [📊 К ИСТОРИИ]  [✅ OK]          ║
║                                                            ║
║ Вы также можете посмотреть эту ставку в разделе "История"║
║                                                            ║
╚════════════════════════════════════════════════════════════╝
```

---

## 📊 ЭТАП 6: ИСТОРИЯ СТАВОК (BetHistoryPage.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
┌──────────────────────────────────────────────────────────────┐
│ LOOSELINE | События | Ставки | История | Кошелёк | Профиль  │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ 📊 МОЯ ИСТОРИЯ СТАВОК                                        │
│                                                              │
│ ФИЛЬТРЫ:                                                    │
│ [ВСЕ] [✅ ВЫИГРЫШИ] [❌ ПРОИГРЫШИ] [⏳ В ОЖИДАНИИ]         │
│ [Период: Последние 30 дней ▼]                              │
│ [Поиск по номеру ставки...]                                │
│                                                              │
│ СТАТИСТИКА:                                                 │
│ Всего ставок: 25                                            │
│ Выигрышей: 16 (64%)  | Проигрышей: 9 (36%)               │
│ В ожидании: 2                                               │
│ Средняя ставка: 95.00 USD                                   │
│ Всего поставлено: 2375.00 USD                               │
│ Всего выиграно: 3840.00 USD                                 │
│ Чистая прибыль: 1465.00 USD                                │
│                                                              │
│ ──────────────────────────────────────────────────────────  │
│                                                              │
│ ТАБЛИЦА СТАВОК:                                             │
│ ┌────────────────────────────────────────────────────────┐  │
│ │ № Ставки │ Событие      │ Дата  │ Сумма │ Результат  │  │
│ ├────────────────────────────────────────────────────────┤  │
│ │ #BET-025 │ Real-Barca   │ 15.12 │ 100   │ ✅ ВЫИГРЫШ │  │
│ │          │ П1 @ 2.10    │ 19:45 │ USD   │ +210 USD   │  │
│ │          │ Выигрыш: 210 │       │       │            │  │
│ ├────────────────────────────────────────────────────────┤  │
│ │ #BET-024 │ Man Utd-Liv  │ 15.12 │ 50    │ ❌ ПРОИГР  │  │
│ │          │ П2 @ 4.10    │ 18:00 │ USD   │ -50 USD    │  │
│ │          │ Результат: 2-1│       │       │            │  │
│ ├────────────────────────────────────────────────────────┤  │
│ │ #BET-023 │ Arsenal-Chel │ 14.12 │ 200   │ ⏳ В ОЖИД  │  │
│ │          │ X @ 3.30     │ 16:00 │ USD   │ Матч через │  │
│ │          │ Потенциал: 660│       │       │ 12 часов  │  │
│ ├────────────────────────────────────────────────────────┤  │
│ │ #BET-022 │ Lakers-Cell  │ 14.12 │ 100   │ ✅ ВЫИГРЫШ │  │
│ │          │ П1 @ 1.75    │ 20:00 │ USD   │ +175 USD   │  │
│ │          │ Выигрыш: 175 │       │       │            │  │
│ └────────────────────────────────────────────────────────┘  │
│                                                              │
│ < Назад  [1] [2] [3] [4] [5]  Далее >                     │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

### КОМПОНЕНТЫ:

**BetResultCard.tsx** -- карточка одной ставки:

```
┌────────────────────────────────────┐
│ Real vs Barcelona                  │
│ 15.12 19:45 | La Liga              │
│ П1 @ 2.10                          │
│                                    │
│ Ставка: 100 USD                    │
│                                    │
│ ✅ ВЫИГРЫШ                         │
│ Выигрыш: 210 USD                   │
│ Прибыль: 110 USD                   │
│                                    │
│ [Детали] [Скачать квитанцию]      │
└────────────────────────────────────┘
```

**BetHistoryStats.tsx** -- статистика:

```
┌────────────────────────────────────────┐
│ 📊 ВАША СТАТИСТИКА                    │
├────────────────────────────────────────┤
│                                        │
│ Всего ставок: 25                      │
│                                        │
│ Выигрыши: 16 ✅                       │
│ Проигрыши: 9 ❌                       │
│ В ожидании: 2 ⏳                       │
│                                        │
│ Win Rate: 64% (16 из 25)              │
│                                        │
│ Всего поставлено: 2,375 USD           │
│ Всего выиграно: 3,840 USD             │
│ Чистая прибыль: +1,465 USD (+62%)     │
│                                        │
│ Средняя ставка: 95 USD                │
│ Средний выигрыш: 240 USD              │
│ ROI: +62%                             │
│                                        │
└────────────────────────────────────────┘
```

---

## 💰 ЭТАП 7: КОШЕЛЁК И БАЛАНС (MyWalletPage.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
┌──────────────────────────────────────────────────────────┐
│ LOOSELINE | События | Ставки | История | Кошелёк | ...  │
├──────────────────────────────────────────────────────────┤
│                                                          │
│ 💰 МОЙ КОШЕЛЁК                                          │
│                                                          │
│ ┌────────────────────────────────────────────────────┐  │
│ │                ВАШЕ СОСТОЯНИЕ                      │  │
│ ├────────────────────────────────────────────────────┤  │
│ │                                                    │  │
│ │ 💵 ОСНОВНОЙ БАЛАНС:                              │  │
│ │     5,000.00 USD                                  │  │
│ │                                                    │  │
│ │ 📊 ДОСТУПНО ДЛЯ СТАВОК:                          │  │
│ │     5,000.00 USD (весь баланс доступен)          │  │
│ │                                                    │  │
│ │ 📈 В ОТКРЫТЫХ СТАВКАХ:                           │  │
│ │     500.00 USD (в 2 ставках)                     │  │
│ │                                                    │  │
│ │ 🎁 БОНУСЫ:                                        │  │
│ │     0.00 USD                                      │  │
│ │                                                    │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ ────────────────────────────────────────────────────── │
│                                                          │
│ 📊 ГРАФИК БАЛАНСА (последние 30 дней):                 │
│                                                          │
│     5500 ┤      ╱╲        ╱───                         │
│     5000 ├──────╱  ╲──────╱                            │
│     4500 ┤                                             │
│          └┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──┴──    │
│            1  5  10 15 20 25 30                       │
│                                                          │
│ ────────────────────────────────────────────────────── │
│                                                          │
│ БЫСТРЫЕ ДЕЙСТВИЯ:                                      │
│                                                          │
│ [💳 ПОПОЛНИТЬ БАЛАНС] [🏦 ВЫВЕСТИ ДЕНЬГИ]            │
│                                                          │
│ ────────────────────────────────────────────────────── │
│                                                          │
│ 📝 ИСТОРИЯ ТРАНЗАКЦИЙ:                                │
│                                                          │
│ ┌────────────────────────────────────────────────────┐ │
│ │ Дата/Время      │ Тип         │ Сумма  │ Баланс   │ │
│ ├────────────────────────────────────────────────────┤ │
│ │ 15.12 19:30     │ ✅ Выигрыш  │ +210.00│ 5210.00  │ │
│ │ 15.12 18:45     │ ❌ Проигрыш │ -50.00 │ 5000.00  │ │
│ │ 15.12 18:00     │ 🎲 Ставка   │ -100.00│ 5050.00  │ │
│ │ 14.12 10:00     │ ✅ Выигрыш  │ +175.00│ 5150.00  │ │
│ │ 13.12 20:00     │ 💳 Депозит  │ +500.00│ 4975.00  │ │
│ │ 10.12 15:30     │ 🏦 Вывод    │ -1000.00│ 4475.00 │ │
│ └────────────────────────────────────────────────────┘ │
│                                                          │
│ < Назад  [1] [2]  Далее >                             │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### КОМПОНЕНТЫ:

**BalanceDisplay.tsx** -- отображение баланса:

```
Большой текст: 5,000.00 USD
Зелёный цвет (деньги есть)
Доступно для ставок
```

**DepositButton.tsx** -- пополнение:

```
При клике открывает форму пополнения:
- Выбор суммы
- Выбор способа оплаты
- Ввод данных карты
- Подтверждение
```

**WithdrawButton.tsx** -- вывод:

```
При клике открывает форму вывода:
- Ввод суммы
- Выбор способа вывода
- Ввод деталей (номер счета и т.д)
- Подтверждение
```

---

## 🎪 ЭТАП 8: ЭКСПРЕСС И КУПОНЫ (CouponSelector.tsx)

### ЧТО ПОКАЗЫВАЕТ?

```
┌──────────────────────────────────────────────┐
│ 🎪 СОЗДАТЬ ЭКСПРЕСС (КУПОН)                 │
├──────────────────────────────────────────────┤
│                                              │
│ Выбранные события:                           │
│                                              │
│ ☑️ 1. Man Utd vs Liverpool (П1 @ 1.85)      │
│ ☑️ 2. Real vs Barcelona (П1 @ 2.10)        │
│ ☑️ 3. Arsenal vs Chelsea (П2 @ 4.00)       │
│                                              │
│ ────────────────────────────────────────── │
│                                              │
│ ТИП СТАВКИ:                                │
│ ◉ ЭКСПРЕСС (ВСЕ выигрывают)                │
│    Общий коэф: 1.85 x 2.10 x 4.00 = 15.54│
│    ✅ Выигрыш есть только если все верны   │
│                                              │
│ ○ СИСТЕМА (2 из 3)                         │
│    3 разные комбинации по 2 события        │
│    Более сложно...                         │
│                                              │
│ ────────────────────────────────────────── │
│                                              │
│ СУММА СТАВКИ:                              │
│ [100.00] USD                                │
│                                              │
│ ────────────────────────────────────────── │
│                                              │
│ РАСЧЁТ ЭКСПРЕССА:                          │
│                                              │
│ Сумма:              100.00 USD              │
│ Коэффициенты:       1.85 x 2.10 x 4.00    │
│ Общий коэффициент:  15.54                  │
│                                              │
│ 🎯 ПОТЕНЦИАЛЬНЫЙ ВЫИГРЫШ:                  │
│    1,554.00 USD                             │
│                                              │
│ 📈 ВАША ПРИБЫЛЬ:                           │
│    1,454.00 USD                             │
│                                              │
│ ⚠️ РИСК: ВЫСОКИЙ                           │
│    Шанс выигрыша: 1.85*2.10*4.00 = ~8%    │
│    ВСЕ события должны выиграть!             │
│                                              │
│ ────────────────────────────────────────── │
│                                              │
│ [✅ СОЗДАТЬ ЭКСПРЕСС]  [🔄 НАЗАД]          │
│                                              │
└──────────────────────────────────────────────┘
```

### ЧТО ПРОИСХОДИТ?

```
1. Пользователь выбирает 3+ события
   ↓
2. Frontend предлагает: "Создать экспресс?"
   ↓
3. Пользователь выбирает ЭКСПРЕСС
   ↓
4. createCoupon() создаёт купон:
   betService.createCoupon(
     user_id='user_123',
     bet_ids=[1, 2, 3]
   )
   ↓
5. Backend создаёт запись в таблице coupons
   ↓
6. Возвращает coupon_id и code (CPN20251215_ABC)
   ↓
7. Frontend показит купон с общим коэффициентом
   ↓
8. Пользователь вводит сумму
   ↓
9. calculatePotentialWin() рассчитывает:
   100 * 15.54 = 1554 USD
   ↓
10. Пользователь подтверждает
    ↓
11. placeBet() размещает ВСЕ 3 ставки за раз
    ↓
12. Все 3 события должны выиграть чтобы выиграл купон
```

---

## 🔔 ЭТАП 9: УВЕДОМЛЕНИЯ (Notifications)

### КОГДА ПОЯВЛЯЮТСЯ?

**BetPlacedNotif.tsx** -- ставка принята:

```
┌─────────────────────────────┐
│ ✅ СТАВКА ПРИНЯТА!          │
│                             │
│ Номер: #BET-025             │
│ Сумма: 100 USD              │
│ Потенциал: 185 USD          │
│                             │
│ [Подробнее]  [✕ Закрыть]   │
└─────────────────────────────┘
```

**BetWonNotif.tsx** -- выигрыш:

```
┌──────────────────────────────────┐
│ 🎉 ВЫ ВЫИГРАЛИ!                 │
│                                  │
│ Ставка #BET-024                  │
│ Выигрыш: 210 USD                 │
│ Деньги добавлены на баланс!      │
│ Новый баланс: 5210 USD           │
│                                  │
│ [История] [Ещё ставок?]  [✕]    │
└──────────────────────────────────┘
```

**BetLostNotif.tsx** -- проигрыш:

```
┌──────────────────────────────────┐
│ ❌ К СОЖАЛЕНИЮ, ПРОИГРЫШ        │
│                                  │
│ Ставка #BET-023                  │
│ На: Arsenal vs Chelsea (П1)      │
│ Результат: 1-1                   │
│                                  │
│ [Другие события] [История]  [✕] │
└──────────────────────────────────┘
```

**EventResolvedNotif.tsx** -- событие разрешено:

```
┌──────────────────────────────────┐
│ 📢 СОБЫТИЕ РАЗРЕШЕНО             │
│                                  │
│ Real vs Barcelona                │
│ Финальный счёт: 3-1 (победа)    │
│                                  │
│ У вас было 2 ставки на это:      │
│ ✅ 1 выигрыш (+210 USD)          │
│ ❌ 1 проигрыш                    │
│                                  │
│ [История] [Новые события]  [✕]   │
└──────────────────────────────────┘
```

### ЧТО ПРОИСХОДИТ?

```
1. Frontend слушает WebSocket или Poll от Backend
   ↓
2. Backend отправляет когда:
   - Ставка размещена успешно
   - Событие разрешено
   - Ставка выиграла
   - Ставка проиграла
   ↓
3. notificationService показывает уведомление
   ↓
4. Уведомление появляется в углу экрана
   ↓
5. Исчезает через 5 секунд ИЛИ пользователь кликает закрыть
```

---

## 📱 ЭТАП 10: АДАПТИВНЫЙ ДИЗАЙН

### МОБИЛЬНЫЙ ТЕЛЕФОН (320px - 768px):

```
┌─────────────────────────────┐
│ LOOSELINE | ⋯               │
├─────────────────────────────┤
│                             │
│ СОБЫТИЯ:                    │
│                             │
│ ┌──────────────────────────┐│
│ │ Man Utd-Liv              ││
│ │ 15.12 18:00              ││
│ │ [П1: 1.85]               ││
│ │ [X: 3.40]                ││
│ │ [П2: 4.10]               ││
│ └──────────────────────────┘│
│                             │
│ ┌──────────────────────────┐│
│ │ Real-Barca               ││
│ │ 15.12 19:45              ││
│ │ [П1: 2.10]               ││
│ │ [X: 3.50]                ││
│ │ [П2: 3.20]               ││
│ └──────────────────────────┘│
│                             │
│ ┌──────────────────────────┐│
│ │ 🎟️ МОЙ КУПОН (3)        ││
│ │ Сумма: [50.00]           ││
│ │ Выигрыш: 275.50          ││
│ │ [✅ СТАВИТЬ]             ││
│ └──────────────────────────┘│
│                             │
│ Баланс: 5000.00 USD         │
│ [История] [Кошелёк]         │
│                             │
└─────────────────────────────┘
```

### ДЕСКТОП (768px+):

```
Боковая панель с купоном
Таблица событий
2-колонный layout
```

---

## ✅ ФИНАЛЬНЫЙ ЧЕК-ЛИСТ  (FRONTEND)

### СТРАНИЦЫ:

* [ ] BetsPage.tsx -- размещение ставок

* [ ] BetSlipPage.tsx -- оформление купона

* [ ] BetHistoryPage.tsx -- история ставок

* [ ] MyWalletPage.tsx -- кошелёк и баланс

### КОМПОНЕНТЫ РАЗМЕЩЕНИЯ СТАВОК:

* [ ] BetSlip.tsx -- купон со статом

* [ ] BetForm.tsx -- форма ставки

* [ ] BetAmountInput.tsx -- ввод суммы

* [ ] PotentialWinDisplay.tsx -- расчёт выигрыша

* [ ] BetConfirmationModal.tsx -- подтверждение

* [ ] SuccessModal.tsx -- успешная ставка

### КОМПОНЕНТЫ КУПОНОВ:

* [ ] CouponSelector.tsx -- выбор событий

* [ ] CouponSummary.tsx -- резюме купона

* [ ] ExpressCalculator.tsx -- калькулятор экспресса

* [ ] CouponPreview.tsx -- предпросмотр

### КОМПОНЕНТЫ РЕЗУЛЬТАТОВ:

* [ ] BetResultCard.tsx -- карточка результата

* [ ] WinBadge.tsx -- бейдж выигрыша

* [ ] LossBadge.tsx -- бейдж проигрыша

* [ ] BetResultsTimeline.tsx -- временная шкала

### КОМПОНЕНТЫ ИСТОРИИ:

* [ ] BetHistoryList.tsx -- список ставок

* [ ] BetHistoryFilter.tsx -- фильтры

* [ ] BetHistoryStats.tsx -- статистика

### КОМПОНЕНТЫ КОШЕЛЬКА:

* [ ] BalanceDisplay.tsx -- показ баланса

* [ ] DepositButton.tsx -- пополнение

* [ ] WithdrawButton.tsx -- вывод

* [ ] TransactionHistory.tsx -- история транзакций

* [ ] BalanceChart.tsx -- график

### КОМПОНЕНТЫ УВЕДОМЛЕНИЙ:

* [ ] BetPlacedNotif.tsx -- ставка принята

* [ ] BetWonNotif.tsx -- выигрыш

* [ ] BetLostNotif.tsx -- проигрыш

* [ ] EventResolvedNotif.tsx -- событие разрешено

### UI КОМПОНЕНТЫ:

* [ ] MoneyInput.tsx -- инпут для денег

* [ ] CoefficientBadge.tsx -- бейдж коэффициента

* [ ] RiskIndicator.tsx -- индикатор риска

* [ ] ConfirmDialog.tsx -- диалог подтверждения

### СЕРВИСЫ И ХУКИ:

* [ ] betService.ts -- API клиент (5 функций)

* [ ] walletService.ts -- API кошелька

* [ ] notificationService.ts -- уведомления

* [ ] useBetSlip.ts -- хук купона

* [ ] useBalance.ts -- хук баланса

* [ ] useBetPlacement.ts -- хук размещения

* [ ] useBetHistory.ts -- хук истории

### ТИПЫ (TypeScript):

* [ ] bets.ts -- интерфейсы для ставок

### СТИЛИ:

* [ ] bets.module.css -- стили размещения ставок

* [ ] wallet.module.css -- стили кошелька

* [ ] history.module.css -- стили истории

* [ ] Адаптивный дизайн (мобайл + десктоп)

### ФУНКЦИОНАЛЬНОСТЬ:

* [ ] Выбор события и коэффициента

* [ ] Ввод суммы ставки

* [ ] Расчёт выигрыша в реальном времени

* [ ] Подтверждение перед ставкой

* [ ] Размещение ставки на Backend

* [ ] Успешное подтверждение

* [ ] История всех ставок

* [ ] Фильтрация по статусу

* [ ] Статистика (выигрыши, проигрыши, ROI)

* [ ] Отображение баланса

* [ ] История транзакций

* [ ] Создание экспрессов (купонов)

* [ ] Расчёт экспресса

* [ ] Уведомления при выигрышах/проигрышах

* [ ] Отображение результатов

* [ ] Работает на мобильных

### ИНТЕГРАЦИЯ:

* [ ] betService вызывает правильные endpoints

* [ ] walletService работает с балансом

* [ ] Уведомления отправляются вовремя

* [ ] История обновляется в реальном времени

* [ ] WebSocket для live-обновлений (опционально)

---

## 📊 ИТОГОВЫЙ РЕЗЮМЕ

```
СТРАНИЦЫ (4):
✅ Размещение ставок (BetsPage)
✅ Оформление купона (BetSlipPage)
✅ История ставок (BetHistoryPage)
✅ Кошелёк и баланс (MyWalletPage)

КОМПОНЕНТЫ (20+):
✅ Компоненты размещения ставок
✅ Компоненты подтверждения
✅ Компоненты купонов/экспрессов
✅ Компоненты результатов
✅ Компоненты истории
✅ Компоненты кошелька
✅ Компоненты уведомлений
✅ UI компоненты

СЕРВИСЫ И ХУКИ (7):
✅ betService.ts — API ставок
✅ walletService.ts — API кошелька
✅ notificationService.ts — уведомления
✅ Хуки управления состоянием

ТИПЫ (TypeScript):
✅ bets.ts — интерфейсы

СТИЛИ:
✅ bets.module.css, wallet.module.css и т.д
✅ Адаптивный дизайн

ФУНКЦИОНАЛЬНОСТЬ:
✅ Полный цикл размещения ставки
✅ Расчёт выигрыша в реальном времени
✅ История всех ставок
✅ Управление кошельком
✅ Создание экспрессов
✅ Уведомления
✅ Статистика
✅ Работает на мобильных
```

**Результат:**

```
┌─────────────────────────────────────────┐
│  ПОЛНОСТЬЮ ФУНКЦИОНАЛЬНЫЙ ИНТЕРФЕЙС    │
│              РАЗМЕЩЕНИЯ СТАВОК          │
│                                         │
│  ✅ Пользователи видят события          │
│  ✅ Выбирают исход (П1, X, П2)         │
│  ✅ Вводят сумму ставки                │
│  ✅ Видят выигрыш в реальном времени   │
│  ✅ Подтверждают и ставят              │
│  ✅ Видят историю всех ставок          │
│  ✅ Видят статистику (выигрыш/убыток)  │
│  ✅ Управляют кошельком                │
│  ✅ Создают экспрессы                  │
│  ✅ Получают уведомления               │
│  ✅ Красивый и удобный интерфейс       │
│  ✅ Работает на мобильных               │
│                                         │
│  🎯 ПОЛНОСТЬЮ ГОТОВО К PRODUCTION!     │
│                                         │
└─────────────────────────────────────────┘
```